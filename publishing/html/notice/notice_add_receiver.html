<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes"><!-- iOS 주소창 없앰 -->
    <title>땡큐베리머치</title>
    <link rel="shortcut icon" href="../../img/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="header_area">
                <button type="button" class="btn pr-10">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1>공지사항 등록</h1>
            </div>
            <div class="header_area">
                <button class="btn btn_fill">저장</button>
            </div>
        </header>
        <div class="body pl-16 pr-16 pb-16">
            <label for="notice_title" class="required">제목</label>
            <div class="input_wrap">
                <div class="p-relative">
                    <input type="text" class="thx_txt righticon" id="notice_title" name="" placeholder="제목을 입력하세요."
                        autocomplete="off" required value="">
                    <div class="input_icon_wrap"></div>
                </div>
                <div class="guide"></div>
            </div>
            <div class="pt-10"></div>
            <label for="notice_content" class="required">내용</label>
            <div class="input_wrap">
                <div class="p-relative">
                    <textarea class="thx_txt righticon notice_content" id="notice_content" name=""
                        placeholder="내용을 입력하세요." autocomplete="off" required value=""></textarea>
                    <div class="input_icon_wrap"></div>
                </div>
                <div class="guide"></div>
            </div>
            <div class="pt-10"></div>
            <label for="" class="required">수신 대상</label>
            <div class="input_wrap">
                <ul class="select_add_list">
                    <li>
                        <button class="btn btn_fill_small" onclick="$('#bottomsheet_notice_receiver').sheet('show');">
                            <span class="material-symbols-outlined">add</span>
                            <span class="d-inline-block ml-5">추가</span>
                        </button>
                    </li>
                    <li>
                        <div class="option_chip">
                            <span class="txt">더본코리아 빽다방 점주</span>
                            <button class="btn btn_chip ml-5">
                                <span class="material-symbols-outlined">close_small</span>
                            </button>
                        </div>
                    </li>
                    <li>
                        <div class="option_chip">
                            <span class="txt">더본코리아 본사직원</span>
                            <button class="btn btn_chip ml-5">
                                <span class="material-symbols-outlined">close_small</span>
                            </button>
                        </div>
                    </li>
                    <li>
                        <div class="option_chip">
                            <span class="txt">우주전자 업체직원</span>
                            <button class="btn btn_chip ml-5">
                                <span class="material-symbols-outlined">close_small</span>
                            </button>
                        </div>
                    </li>
                </ul>
                <div class="guide"></div>
            </div>
        </div>
    </div>

    <!-- 수신 대상 추가 -->
    <div class="bottomSheetContainer" id="bottomsheet_notice_receiver" data-type="bottom">
        <div class="bottomSheet">
            <button class="btn handle" onclick="$('#bottomsheet_notice_receiver').sheet('hide');"><span></span></button>
            <div class="bottomSheet_header">
                <div class="title">수신 대상 추가</div>
            </div>
            <div class="pt-10 mt-10"></div>
            <div class="bottomSheet_body">
                <label for="account_kind" class="required">계정 종류</label>
                <div class="input_wrap">
                    <div class="thx_select_box">
                        <select name="" id="account_kind" class="thx_select">
                            <option value="all" selected>전체</option>
                            <option value="storeOwner">점주</option>
                            <option value="headOfficeAdmin">본사관리자</option>
                            <option value="headOfficeStaff">본사직원</option>
                            <option value="partnerStaff">업체직원</option>
                        </select>
                    </div>
                    <div class="guide"></div>
                </div>
                <div class="pt-10"></div>
                <div class="notice_receiver company_wrap">
                    <div class="d-left-center">
                        <label for="find_company" class="">회사</label>
                        <button class="btn btn_tooltip" data-tooltipname="tooltip_company"
                            data-tooltip="점주가 소유한 매장 브랜드의 본사">
                            <span class="material-symbols-outlined">info</span>
                        </button>
                    </div>
                    <div class="input_wrap">
                        <div class="p-relative input_box search">
                            <input type="text" class="thx_txt bothicon" id="find_company" name="find_company"
                                placeholder="회사 이름을 입력하세요" autocomplete="off" required>
                            <div class="input_icon_wrap"></div>
                            <div class="autoList_wrap thx_scrollbar" data-autolist="find_company">
                                <ul class="autoList">
                                </ul>
                            </div>
                        </div>
                        <div class="guide"></div>
                    </div>
                </div>
                <div class="pt-10"></div>
                <div class="notice_receiver brand_wrap">
                    <div class="d-left-center">
                        <label for="find_brand" class="">브랜드</label>
                        <button class="btn btn_tooltip" data-tooltipname="tooltip_brand" data-tooltip="점주가 소유한 매장 브랜드">
                            <span class="material-symbols-outlined">info</span>
                        </button>
                    </div>
                    <div class="input_wrap">
                        <div class="p-relative input_box search">
                            <input type="text" class="thx_txt bothicon" id="find_brand" name="find_brand"
                                placeholder="브랜드 이름을 입력하세요" autocomplete="off" required>
                            <div class="input_icon_wrap"></div>
                            <div class="autoList_wrap thx_scrollbar" data-autolist="find_brand">
                                <ul class="autoList">
                                </ul>
                            </div>
                        </div>
                        <div class="guide"></div>
                    </div>
                </div>
                <div class="d-center mt-16 pt-16 pb-16">
                    <button class="btn btn_txt">초기화</button>
                    <button class="btn btn_fill btn_forward ml-10">적용</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading_wrap">
        <div class="spinner-border big"></div>
    </div>

    <script src="../../js/jquery-3.7.1.min.js"></script>
    <script src="../../js/hammer.min.js"></script>
    <script src="../../js/common.js"></script>
    <script>
        $(function () {
            initData();
            initEventListener();
        });

        function initData() {

        };

        function initEventListener() {

        }

        /* 전체 페이지의 모든 외부 리소스와 이미지가 브라우저에 불려진 후 로딩 감추기 */
        $(window).on('load', function () {
            $('.loading_wrap').hide();
        });
    </script>
    <script>
        /* 제목 입력 초기화 */
        var inputWithReset_notice_title = new InputWithReset('#notice_title');
        /* 내용 입력 초기화 */
        var inputWithReset_notice_content = new InputWithReset('#notice_content');

        /* 수신 대상 회사 이름 입력 초기화 */
        var inputWithReset_find_company = new InputWithReset('#find_company');
        /* 수신 대상 회사 자동완성 */
        $('#find_company').autoComplete_company();

        /* 수신 대상 브랜드 이름 입력 초기화 */
        var inputWithReset_find_brand = new InputWithReset('#find_brand');
        /* 수신 대상 브랜드 자동완성 */
        $('#find_brand').autoComplete_brand();

        /* 수신 대상 추가 열기 */
        $('#bottomsheet_notice_receiver').sheet('show');
    </script>
    <script>
        /* 회사, 브랜드 툴팁 */
        $('.btn_tooltip').on('click', function (event) {
            var tooltip_name = $(event.currentTarget).data('tooltipname');
            if ($(`#${tooltip_name}`).length) {
                $(`#${tooltip_name}`).remove();
                return;
            }
            var left = $(event.currentTarget).position().left + $(event.currentTarget).width();
            var top = $(event.currentTarget).position().top;
            var tooltip_content = $(event.currentTarget).data('tooltip');
            var html = `
                <div id="${tooltip_name}" class="notice_tooltip" style="left:${left}px;top:${top}px;">${tooltip_content}</div>
            `;
            $('.bottomSheet_body').append(html);
        });

        /* 계정종류 바뀔 때마다 툴팁 내용 달라짐 */
        $('#account_kind').on('change', function (event) {
            $('.company_wrap').removeClass('disabled');
            $('.brand_wrap').removeClass('disabled');
            $('.notice_tooltip').remove();
            var account_kind = $(event.target).val();
            switch (account_kind) {
                case 'all':
                    $('.company_wrap').addClass('disabled');
                    $('.brand_wrap').addClass('disabled');
                    $('.company_wrap .btn_tooltip').data('tooltip', '');
                    $('.brand_wrap .btn_tooltip').data('tooltip', '');
                    break;
                case 'storeOwner':
                    $('.company_wrap .btn_tooltip').data('tooltip', '점주가 소유한 매장 브랜드의 본사');
                    $('.brand_wrap .btn_tooltip').data('tooltip', '점주가 소유한 매장 브랜드');
                    break;
                case 'headOfficeAdmin':
                    $('.brand_wrap').addClass('disabled');
                    $('.company_wrap .btn_tooltip').data('tooltip', '본사관리자가 소속한 회사');
                    $('.brand_wrap .btn_tooltip').data('tooltip', '');
                    break;
                case 'headOfficeStaff':
                    $('.company_wrap .btn_tooltip').data('tooltip', '본사직원이 소속한 회사');
                    $('.brand_wrap .btn_tooltip').data('tooltip', '본사직원이 담당하는 브랜드');
                    break;
                case 'partnerStaff':
                    $('.company_wrap .btn_tooltip').data('tooltip', '업체직원이 거래하는 회사');
                    $('.brand_wrap .btn_tooltip').data('tooltip', '업체직원이 거래하는 브랜드');
                    break;
            }
        });
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes"><!-- iOS 주소창 없앰 -->
    <title>땡큐베리머치</title>
    <link rel="shortcut icon" href="../../img/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body>
    <div class="container white">
        <header>
            <div class="header_area">
                <button type="button" class="btn pr-10">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1>계약서</h1>
            </div>
            <div class="header_area">
                <button type="button" class="btn btn_fill" onclick="$('#contract_modify_report').sheet('show');">수정
                    요청</button>
                <button type="button" class="btn btn_fill btn_accept ml-10">수락</button>
            </div>
        </header>
        <div class="body pl-16 pr-16">
            <div class="contract_info">
                <strong>안산역1호점</strong>과(와) <strong>아남전자(담당자 홍길동)</strong>는(은)<br>
                상호 신뢰를 기초로 하여<br>
                본 계약에 관한 전반적인 사항을 규정하고,<br>
                계약의 책임과 의무를 성실하게 준수하기를 약정한다.
            </div>
            <div class="pt-16"></div>
            <div class="delivery_below_comment">아래와 같이 계약합니다.</div>
            <div class="pt-16"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">1. 납품현장</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">2. 납품기한</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">3. 계약품명</label>
                <table class="tbl_delivery_contract_item_info">
                    <colgroup>
                        <col style="width:4.4rem;">
                        <col style="width:4.4rem;">
                        <col style="width:25%">
                        <col>
                        <col style="width:20%">
                    </colgroup>
                    <thead>
                        <tr>
                            <th class="left" colspan="5">품명</th>
                        </tr>
                        <tr>
                            <th>수량</th>
                            <th>단위</th>
                            <th>단가</th>
                            <th>공급가액</th>
                            <th>세액</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="5">
                                <table class="tbl_delivery_contract_inner_item_info">
                                    <colgroup>
                                        <col style="width:4.4rem;">
                                        <col style="width:4.4rem;">
                                        <col style="width:25%">
                                        <col>
                                        <col style="width:20%">
                                    </colgroup>
                                    <tbody>
                                        <tr>
                                            <td colspan="5"><strong class="label">종목</strong><span>16채널DVR</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="5"><strong class="label">품목</strong><span>CMS</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="5"><strong class="label">모델명</strong><span>CM-2HL16V3</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>EA</td>
                                            <td class="text-align-right">640,000</td>
                                            <td class="text-align-right">640,000</td>
                                            <td class="text-align-right">64,000</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <table class="tbl_delivery_contract_inner_item_info">
                                    <colgroup>
                                        <col style="width:4.4rem;">
                                        <col style="width:4.4rem;">
                                        <col style="width:25%">
                                        <col>
                                        <col style="width:20%">
                                    </colgroup>
                                    <tbody>
                                        <tr>
                                            <td colspan="5"><strong class="label">종목</strong><span>16채널DVR</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="5"><strong class="label">품목</strong><span>CMS</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="5"><strong class="label">모델명</strong><span>CM-2HL16V3</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>EA</td>
                                            <td class="text-align-right">640,000</td>
                                            <td class="text-align-right">640,000</td>
                                            <td class="text-align-right">64,000</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <table class="tbl_delivery_contract_inner_item_info">
                                    <colgroup>
                                        <col style="width:4.4rem;">
                                        <col style="width:4.4rem;">
                                        <col style="width:25%">
                                        <col>
                                        <col style="width:20%">
                                    </colgroup>
                                    <tbody>
                                        <tr>
                                            <td colspan="5"><strong class="label">종목</strong><span>16채널DVR</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="5"><strong class="label">품목</strong><span>CMS</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="5"><strong class="label">모델명</strong><span>CM-2HL16V3</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>1</td>
                                            <td>EA</td>
                                            <td class="text-align-right">640,000</td>
                                            <td class="text-align-right">640,000</td>
                                            <td class="text-align-right">64,000</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="contract_total_wrap">
                    <div class="label">합계</div>
                    <div class="total_value">￦2,816,000</div>
                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">4. 계약금액</label>
                <div class="thx_value_readonly">2,816,000원</div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">5. 공급가액</label>
                <div class="thx_value_readonly">2,560,000원</div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">6. 세액</label>
                <div class="thx_value_readonly">256,000원</div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">7. 대금지급</label>
                <div class="thx_value_readonly">
                    계약금 총액의 30% 844,800원을 계약시 지급하고<br>
                    잔금 총액의 70% 1,971,200원을 시공 검수일에 지급한다.
                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">8. 계약조건</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">9. A/S 규정</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">10. 서비스 승계</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">11. 입금계좌번호</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">12. 비고</label>
                <div class="thx_value_readonly">

                </div>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical">
                <label class="delivery_detail_title">계약자</label>
                <table class="tbl_request_info">
                    <colgroup>
                        <col style="width:6rem;">
                        <col style="width:calc(100% - 6rem);">
                    </colgroup>
                    <tbody>
                        <tr>
                            <th>이름</th>
                            <td>[점주] 안산역1호점</td>
                        </tr>
                        <tr>
                            <th>연락처</th>
                            <td>01022224444</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="pt-10"></div>
            <div class="detail_item vertical p-relative">
                <label class="delivery_detail_title">공급자</label>
                <table class="tbl_request_info">
                    <colgroup>
                        <col style="width:6rem;">
                        <col style="width:calc(100% - 6rem);">
                    </colgroup>
                    <tbody>
                        <tr>
                            <th>상호</th>
                            <td>아남전자</td>
                        </tr>
                        <tr>
                            <th>주소</th>
                            <td>경기도 안산시 상록구 푸르고아름다운비단로 1002길 39</td>
                        </tr>
                        <tr>
                            <th>담당자</th>
                            <td>홍길동</td>
                        </tr>
                        <tr>
                            <th>연락처</th>
                            <td>01077778888</td>
                        </tr>
                    </tbody>
                </table>
                <img src="../../img/sign.png" alt="" class="contract_giver_sign">
            </div>
            <div class="pt-10 mt-10"></div>
            <div class="detail_item vertical p-relative">
                <table class="tbl_request_info">
                    <colgroup>
                        <col style="width:6rem;">
                        <col style="width:calc(100% - 6rem);">
                    </colgroup>
                    <tbody>
                        <tr>
                            <th class="contract_date">계약일</th>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
                <div class="contract_date_notice p-absolute">※계약체결시 날짜 확정</div>
            </div>
            <div class="pt-16"></div>
        </div>
    </div>

    <div class="bottomSheetContainer" id="contract_modify_report" data-type="bottom">
        <div class="bottomSheet">
            <button class="btn handle" onclick="$('#contract_modify_report').sheet('hide');"><span></span></button>
            <div class="bottomSheet_header">
                <div class="title">계약서 수정요청</div>
            </div>
            <div class="pt-10 mt-10"></div>
            <div class="bottomSheet_body">
                <div class="input_wrap w-100">
                    <div class="p-relative">
                        <textarea class="thx_txt righticon delivery_report_modify_etc" id="delivery_report_modify_etc"
                            name="" placeholder="수정요청 내용을 입력하세요." autocomplete="off" required value=""></textarea>
                        <div class="input_icon_wrap"></div>
                    </div>
                </div>

                <div class="d-center mt-16 pt-16 pb-16">
                    <button class="btn btn_fill">저장</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 계약자 서명 -->
    <div class="bottomSheetContainer" id="bottomsheet_contract_receiver_cert" data-type="bottom">
        <div class="bottomSheet">
            <button class="btn handle"
                onclick="$('#bottomsheet_contract_receiver_cert').sheet('hide');"><span></span></button>
            <div class="bottomSheet_header">
                <div class="title">계약자 서명</div>
            </div>
            <div class="pt-10 mt-10"></div>
            <div class="bottomSheet_body">
                <div class="wrap_canvas" id="wrap_canvas_receiver_cert">
                    <canvas></canvas>
                </div>
                <div class="d-center mt-16 pt-16 pb-16">
                    <button class="btn btn_txt btn_init_signature">초기화</button>
                    <button class="btn btn_fill btn_apply_signature ml-10">저장</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading_wrap">
        <div class="spinner-border big"></div>
    </div>

    <script src="../../js/jquery-3.7.1.min.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <script src="../../js/jquery.ui.touch-punch.min.js"></script>
    <script src="../../js/hammer.min.js"></script>
    <script src="../../js/common.js"></script>
    <script>
        $(function () {
            initData();
            initEventListener();
        });

        function initData() {

        }

        function initEventListener() {

        }

        /* 전체 페이지의 모든 외부 리소스와 이미지가 브라우저에 불려진 후 로딩 감추기 */
        $(window).on('load', function () {
            $('.loading_wrap').hide();
        });
    </script>
    <script>
        /* 계약서 수정요청 내용 입력 초기화 */
        var inputWithReset_delivery_report_modify_etc = new InputWithReset('#delivery_report_modify_etc');
        /* 계약서 수정요청 열기 */
        /* $('#contract_modify_report').sheet('show'); */
    </script>
    <script>
        $('.btn_accept').on('click', function () {    // 수락 버튼
            $('#bottomsheet_contract_receiver_cert').sheet('show');
            $('#wrap_canvas_receiver_cert').delete_signature();
            $('#wrap_canvas_receiver_cert').draw_signature();
        });

        $('.btn_init_signature').on('click', function () {  // 서명 팝업 초기화 버튼
            $('#wrap_canvas_receiver_cert').delete_signature();
        });

        function isCanvasCleared(canvas) {
            var context = canvas.getContext('2d', { willReadFrequently: true });
            var imgData = context.getImageData(0, 0, canvas.width, canvas.height);
            // 캔버스의 모든 픽셀값이 0이면 클리어된 것으로 간주
            for (var i = 0; i < imgData.data.length; i++) {
                if (imgData.data[i] !== 0) {
                    // 픽셀값이 0이 아닌 것이 발견되면 클리어되지 않은 것으로 간주
                    return false;
                }
            }
            // 모든 픽셀값이 0이면 클리어된 것으로 간주
            return true;
        }
        $('.btn_apply_signature').on('click', function () { // 서명 팝업 저장 버튼
            var canvas = $('#wrap_canvas_receiver_cert canvas')[0];
            if (isCanvasCleared(canvas)) {
                $.modal('show', {
                    message: `서명난이 비었습니다.`,
                    onebutton: `<button class="btn btn_fill" onclick="$.modal('hide')">확인</button>`,
                });
            } else {
                //$('#wrap_canvas_receiver_cert').make_signature_data({ container: '#receiver_cert' });
                $('#wrap_canvas_receiver_cert').delete_signature();
                $('#bottomsheet_contract_receiver_cert').sheet('hide');
            }
        });
    </script>
</body>

</html>